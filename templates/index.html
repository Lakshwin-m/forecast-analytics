<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Energy Forecasting Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <script>
      tailwind.config = {
        theme: {
          extend: {
            fontFamily: { sans: ["Inter", "sans-serif"] },
            colors: {
              brand: {
                50: "#f0f9ff",
                500: "#0ea5e9",
                600: "#0284c7",
                700: "#0369a1",
                900: "#0c4a6e",
              },
            },
          },
        },
      };
    </script>
    <style>
      body {
        background: radial-gradient(
          ellipse at top,
          #020617 0%,
          #0f172a 30%,
          #020617 100%
        );
        min-height: 100vh;
      }

      .dark body {
        background: radial-gradient(
          ellipse at top,
          #020617 0%,
          #0f172a 30%,
          #020617 100%
        );
      }

      .floating-element {
        backdrop-filter: blur(20px);
        background: rgba(255, 255, 255, 0.7);
        border: 1px solid rgba(255, 255, 255, 0.3);
        box-shadow: 0 20px 40px rgba(0, 0, 0, 0.05);
        transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
      }

      .dark .floating-element {
        background: rgba(2, 6, 23, 0.9);
        border: 1px solid rgba(30, 41, 59, 0.4);
        box-shadow: 0 20px 40px rgba(0, 0, 0, 0.4);
      }

      .floating-element:hover {
        transform: translateY(-4px);
        box-shadow: 0 32px 64px rgba(0, 0, 0, 0.1);
      }

      .dark .floating-element:hover {
        box-shadow: 0 32px 64px rgba(0, 0, 0, 0.6);
      }

      .upload-zone {
        background: linear-gradient(
          135deg,
          rgba(14, 165, 233, 0.05) 0%,
          rgba(59, 130, 246, 0.05) 100%
        );
        border: 2px dashed rgba(14, 165, 233, 0.2);
        transition: all 0.3s ease;
      }

      .upload-zone:hover {
        background: linear-gradient(
          135deg,
          rgba(14, 165, 233, 0.1) 0%,
          rgba(59, 130, 246, 0.1) 100%
        );
        border-color: rgba(14, 165, 233, 0.4);
        transform: scale(1.02);
      }

      .dark .upload-zone {
        background: linear-gradient(
          135deg,
          rgba(14, 165, 233, 0.08) 0%,
          rgba(59, 130, 246, 0.08) 100%
        );
        border-color: rgba(14, 165, 233, 0.4);
      }

      .range-slider {
        appearance: none;
        height: 6px;
        background: linear-gradient(90deg, #e2e8f0, #cbd5e1);
        border-radius: 20px;
        outline: none;
        transition: all 0.3s ease;
      }

      .range-slider::-webkit-slider-thumb {
        appearance: none;
        width: 20px;
        height: 20px;
        background: linear-gradient(135deg, #0ea5e9, #0284c7);
        border-radius: 50%;
        cursor: pointer;
        box-shadow: 0 4px 12px rgba(14, 165, 233, 0.3);
        transition: all 0.2s ease;
      }

      .range-slider::-webkit-slider-thumb:hover {
        transform: scale(1.2);
        box-shadow: 0 6px 20px rgba(14, 165, 233, 0.5);
      }

      .dark .range-slider {
        background: linear-gradient(90deg, #1e293b, #334155);
      }

      .btn-primary {
        background: linear-gradient(135deg, #0ea5e9, #0284c7);
        border: none;
        transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        box-shadow: 0 8px 32px rgba(14, 165, 233, 0.2);
      }

      .btn-primary:hover {
        transform: translateY(-3px);
        box-shadow: 0 16px 48px rgba(14, 165, 233, 0.3);
        background: linear-gradient(135deg, #0284c7, #0369a1);
      }

      .btn-primary:disabled {
        opacity: 0.5;
        transform: none;
        box-shadow: 0 4px 16px rgba(14, 165, 233, 0.1);
      }

      .pulse-dot {
        animation: pulse-glow 2s infinite;
      }

      @keyframes pulse-glow {
        0%,
        100% {
          opacity: 0.4;
          transform: scale(1);
        }
        50% {
          opacity: 1;
          transform: scale(1.1);
        }
      }

      .simple-loader {
        width: 36px;
        height: 36px;
        border: 3px solid transparent;
        border-top-color: white;
        border-right-color: white;
        border-radius: 50%;
        animation: simple-spin 1.2s linear infinite;
        box-shadow: 0 0 12px rgba(14, 165, 233, 0.4);
      }

      @keyframes simple-spin {
        0% {
          transform: rotate(0deg);
        }
        100% {
          transform: rotate(360deg);
        }
      }

      .fade-in {
        animation: fadeIn 0.6s ease-out;
      }

      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(20px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }
    </style>
  </head>
  <body class="dark transition-all duration-500">
    <div class="min-h-screen flex items-center justify-center p-4 sm:p-8">
      <div class="w-full max-w-4xl">
        <!-- Hero Section -->
        <div class="text-center mb-16 fade-in">
          <div
            class="inline-flex items-center justify-center w-24 h-24 bg-gradient-to-br from-sky-400 via-blue-500 to-indigo-600 rounded-3xl mb-8 shadow-2xl"
          >
            <svg
              class="w-12 h-12 text-white"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="1.5"
                d="M13 10V3L4 14h7v7l9-11h-7z"
              />
            </svg>
          </div>

          <h1
            class="text-5xl sm:text-6xl font-light bg-gradient-to-r from-slate-100 via-white to-slate-100 bg-clip-text text-transparent mb-6 leading-tight"
          >
            Energy Forecasting
          </h1>

          <p
            class="text-xl text-slate-300 leading-relaxed max-w-3xl mx-auto font-light mb-8"
          >
            Advanced AI-powered predictions for energy consumption patterns
            using state-of-the-art time series models. Upload your historical
            energy data and get accurate forecasts to optimize consumption,
            reduce costs, and improve sustainability planning.
          </p>

          <!-- Feature Highlights Section -->
          <div
            class="grid grid-cols-1 md:grid-cols-3 gap-6 max-w-4xl mx-auto mt-12"
          >
            <div class="floating-element rounded-2xl p-6 text-center">
              <div
                class="w-12 h-12 bg-gradient-to-br from-emerald-400 to-teal-500 rounded-xl mx-auto mb-4 flex items-center justify-center"
              >
                <svg
                  class="w-6 h-6 text-white"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"
                  />
                </svg>
              </div>
              <h3 class="text-lg font-medium text-slate-100 mb-2">
                Smart Analytics
              </h3>
              <p class="text-slate-300 text-sm">
                Advanced pattern recognition identifies seasonal trends and
                consumption anomalies
              </p>
            </div>

            <div class="floating-element rounded-2xl p-6 text-center">
              <div
                class="w-12 h-12 bg-gradient-to-br from-purple-400 to-indigo-500 rounded-xl mx-auto mb-4 flex items-center justify-center"
              >
                <svg
                  class="w-6 h-6 text-white"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"
                  />
                </svg>
              </div>
              <h3 class="text-lg font-medium text-slate-100 mb-2">
                Accurate Predictions
              </h3>
              <p class="text-slate-300 text-sm">
                Machine learning models deliver up to 95% accuracy for short and
                long-term forecasts
              </p>
            </div>

            <div class="floating-element rounded-2xl p-6 text-center">
              <div
                class="w-12 h-12 bg-gradient-to-br from-orange-400 to-red-500 rounded-xl mx-auto mb-4 flex items-center justify-center"
              >
                <svg
                  class="w-6 h-6 text-white"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"
                  />
                </svg>
              </div>
              <h3 class="text-lg font-medium text-slate-100 mb-2">
                Cost Optimization
              </h3>
              <p class="text-slate-300 text-sm">
                Identify peak usage periods and optimize energy procurement
                strategies
              </p>
            </div>
          </div>
        </div>

        <!-- Main Interface -->
        <div class="space-y-12">
          <!-- File Upload Section -->
          <div
            class="floating-element rounded-3xl p-8 fade-in"
            style="animation-delay: 0.2s"
          >
            <div class="flex items-center gap-6 mb-8">
              <div
                class="w-16 h-16 bg-gradient-to-br from-sky-400 to-blue-500 rounded-2xl flex items-center justify-center shadow-lg"
              >
                <svg
                  class="w-8 h-8 text-white"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="1.5"
                    d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M9 19l3 3m0 0l3-3m-3 3V10"
                  />
                </svg>
              </div>
              <div>
                <h2 class="text-2xl font-medium text-slate-100 mb-2">
                  Upload Dataset
                </h2>
                <p class="text-slate-300">
                  Import your historical energy consumption data in CSV format.
                  Include timestamps and consumption values for best results.
                </p>
              </div>
            </div>

            <div
              class="upload-zone min-h-[140px] rounded-2xl flex items-center justify-center cursor-pointer"
              onclick="document.getElementById('file-input').click()"
            >
              <input
                type="file"
                id="file-input"
                accept=".csv"
                class="hidden"
                onchange="handleFileSelect(this)"
              />
              <div class="text-center" id="upload-area">
                <div
                  class="w-20 h-20 mx-auto mb-6 bg-slate-800/70 rounded-2xl flex items-center justify-center backdrop-blur-sm"
                >
                  <svg
                    class="w-10 h-10 text-sky-400"
                    fill="none"
                    stroke="currentColor"
                    viewBox="0 0 24 24"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="1.5"
                      d="M12 6v6m0 0v6m0-6h6m-6 0H6"
                    />
                  </svg>
                </div>
                <p class="text-lg font-medium text-slate-200 mb-2">
                  Drop your CSV file here
                </p>
                <p class="text-slate-400">or click to browse files</p>
              </div>
            </div>
          </div>

          <!-- Configuration Section -->
          <div
            class="floating-element rounded-3xl p-8 fade-in"
            style="animation-delay: 0.4s"
          >
            <div class="flex items-center gap-6 mb-8">
              <div
                class="w-16 h-16 bg-gradient-to-br from-purple-400 to-indigo-500 rounded-2xl flex items-center justify-center shadow-lg"
              >
                <svg
                  class="w-8 h-8 text-white"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="1.5"
                    d="M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 100 4m0-4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 100 4m0-4v2m0-6V4"
                  />
                </svg>
              </div>
              <div>
                <h2 class="text-2xl font-medium text-slate-100 mb-2">
                  Forecast Settings
                </h2>
                <p class="text-slate-300">
                  Configure prediction parameters to balance processing speed
                  with forecast detail and accuracy
                </p>
              </div>
            </div>

            <div class="flex items-center justify-between mb-6">
              <span class="text-lg font-medium text-slate-100"
                >Data Points</span
              >
              <div class="flex items-center gap-3">
                <span class="text-3xl font-light text-sky-400" id="range-value"
                  >100</span
                >
                <span class="text-slate-400">points</span>
              </div>
            </div>

            <input
              type="range"
              id="n_points"
              min="50"
              max="5000"
              step="10"
              value="100"
              class="range-slider w-full mb-4"
              oninput="document.getElementById('range-value').textContent = this.value"
            />

            <div class="flex justify-between text-sm text-slate-400">
              <span>50</span>
              <span>5000</span>
            </div>
          </div>

          <!-- Action Section -->
          <div class="text-center fade-in" style="animation-delay: 0.6s">
            <button
              id="predict-btn"
              onclick="handlePredict()"
              class="btn-primary text-white font-medium py-5 px-12 rounded-2xl text-lg inline-flex items-center gap-4 disabled:cursor-not-allowed"
              disabled
            >
              <svg
                class="w-6 h-6"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="1.5"
                  d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"
                />
              </svg>
              <span>Generate AI Forecast</span>
              <div class="w-2 h-2 bg-white/40 rounded-full pulse-dot"></div>
            </button>
          </div>

          <!-- Status Section -->
          <div
            id="status-card"
            class="floating-element rounded-3xl p-8 hidden fade-in"
          >
            <div class="flex items-center gap-6">
              <div
                class="w-16 h-16 bg-gradient-to-br from-emerald-400 to-teal-500 rounded-2xl flex items-center justify-center shadow-lg"
              >
                <div class="simple-loader"></div>
              </div>
              <div>
                <h3 class="text-2xl font-medium text-slate-100 mb-2">
                  Processing Data
                </h3>
                <p class="text-slate-300">
                  AI model is generating predictions...
                </p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Scripts -->
    <script>
      let selectedFile = null;

      function handleFileSelect(input) {
        const file = input.files[0];
        if (file) {
          selectedFile = file;
          updateUploadArea(file.name);
          document.getElementById("predict-btn").disabled = false;
        }
      }

      function updateUploadArea(fileName) {
        const uploadArea = document.getElementById("upload-area");
        uploadArea.innerHTML = `
          <div class="w-20 h-20 mx-auto mb-6 bg-emerald-900/50 rounded-2xl flex items-center justify-center backdrop-blur-sm">
            <svg class="w-10 h-10 text-emerald-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M5 13l4 4L19 7"/>
            </svg>
          </div>
          <p class="text-lg font-medium text-emerald-400 mb-2">File Selected</p>
          <p class="text-slate-400">${fileName}</p>
        `;
      }

      function handlePredict() {
        if (!selectedFile) {
          alert("Please select a CSV file first");
          return;
        }

        const nPoints = document.getElementById("n_points").value;
        const formData = new FormData();
        formData.append("file", selectedFile);
        formData.append("n_points", nPoints);

        document.getElementById("status-card").classList.remove("hidden");
        document.getElementById("predict-btn").disabled = true;

        fetch("/", {
          method: "POST",
          body: formData,
        })
          .then((response) => {
            if (response.ok) {
              return response.text();
            }
            throw new Error("Network response was not ok");
          })
          .then((html) => {
            document.open();
            document.write(html);
            document.close();
          })
          .catch((error) => {
            console.error("Error:", error);
            alert("An error occurred while processing your request");
          })
          .finally(() => {
            document.getElementById("status-card").classList.add("hidden");
            document.getElementById("predict-btn").disabled = false;
          });
      }

      // Drag and drop functionality
      const dropZone = document.querySelector(".upload-zone");

      dropZone.addEventListener("dragover", (e) => {
        e.preventDefault();
        dropZone.style.transform = "scale(1.05)";
        dropZone.style.borderColor = "rgba(14, 165, 233, 0.6)";
      });

      dropZone.addEventListener("dragleave", (e) => {
        e.preventDefault();
        dropZone.style.transform = "scale(1.02)";
        dropZone.style.borderColor = "rgba(14, 165, 233, 0.4)";
      });

      dropZone.addEventListener("drop", (e) => {
        e.preventDefault();
        dropZone.style.transform = "scale(1.02)";
        dropZone.style.borderColor = "rgba(14, 165, 233, 0.4)";

        const files = e.dataTransfer.files;
        if (files.length > 0) {
          const file = files[0];
          if (file.type === "text/csv" || file.name.endsWith(".csv")) {
            selectedFile = file;
            updateUploadArea(file.name);
            document.getElementById("predict-btn").disabled = false;
          } else {
            alert("Please upload a CSV file only");
          }
        }
      });
    </script>
  </body>
</html>
